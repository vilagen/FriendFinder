<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/e8880dcfac.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <title>Survey</title>
</head>
<body>

    <div class = "container">

        <h1>Friend Finder Survey</h1>

        <br>

        <h4>Below is a survey that scores your compatibility with other friend finders. <br>
            Once done, our page will show the best match for you on Friend Finders!
        </h4>

        <hr>

        
        <h2>Your Name</h2>

        <input type = "text" id = "yourName" class= "form-control" placeholder = "Your Name">
        
        <h2>Picture Link</h2>

        <input type = "text" id = "photoLink" class= "form-control" placeholder = "Link to Your Photo">

        <br>

        <h4>Choose how much you agree with the following statements</h4>
            
        <hr>
       
        <h3><strong>Question 1</strong></h3>
        <h4>You enjoy the outdoors.</h4>
        <div class = "select1to10" id = "Q1">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question1" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question1"value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question1" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question1" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question1" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <br>

        <h3><strong>Question 2</strong></h3>
        <h4>You enjoy binge watching more than fraternizing.</h4>
        <div class = "select1to10" id = "Q2">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question2" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question2" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question2" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question2" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question2" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <br>

        <h3><strong>Question 3</strong></h3>
        <h4>Politics are important to you.</h4>
        <div class = "select1to10" id = "Q3">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question3" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question3" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question3" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question3" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question3" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <br>

        <h3><strong>Question 4</strong></h3>
        <h4>You enjoy reading.</h4>
        <div class = "select1to10" id = "Q4">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question4" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question4" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question4" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question4" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question4" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <br>

        <h3><strong>Question 5</strong></h3>
        <h4>You enjoy a respectful debate.</h4>
        <div class = "select1to10" id = "Q5">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question5" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question5" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question5" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question5" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question5" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <h3><strong>Question 6</strong></h3>
        <h4>You are more of a night person than day.</h4>
        <div class = "select1to10" id = "Q6">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question6" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question6" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question6" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question6" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question6" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <h3><strong>Question 7</strong></h3>
        <h4>You are materialistic.</h4>
        <div class = "select1to10" id = "Q7">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question7" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question7" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question7" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question7" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question7" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <h3><strong>Question 8</strong></h3>
        <h4>You love to travel.</h4>
        <div class = "select1to10" id = "Q8">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question8" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question8" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question8" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question8" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question8" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <h3><strong>Question 9</strong></h3>
        <h4>You are a goal-oriented person.</h4>
        <div class = "select1to10" id = "Q9">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question9" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question9" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question9" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question9" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question9" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <h3><strong>Question 10</strong></h3>
        <h4> You generally rely more on experience than imagination.</h4>
        <div class = "select1to10" id = "Q10">

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question10" value = "1">
            <label class = "form-check-label"> 1 (Strongly Disagree) </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question10" value = "2">
            <label class = "form-check-label"> 2 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question10" value = "3">
            <label class = "form-check-label"> 3 </label>
            </div>
            
            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question10" value = "4">
            <label class = "form-check-label"> 4 </label>
            </div>

            <div class = "form-check">
            <input class = "form-check-input" type = "radio" name = "question10" value = "5">
            <label class = "form-check-label"> 5 (Strongly Agree) </label>
            </div>
        
        </div>

        <hr>

        <button type = "button" class="btn btn-lg btn-primary" id = "submit"><span class = "fa fa-poll-h"></span>  Submit  </button>
        
        <!-- Model -->
        <div class = "modal fade" id = "bestFriendModal" aria-labelledby="viewResultModel">
            <div class = "modal-dialog" role = "document">
                <div class = "modal-content">
                    <div class = "modal-header">
                        <h3 class = "model-title"> Your Match! </h3>
                    </div>
                    <div class = "modal-body">
                        <h4 id = "matchedFriend"></h4>
                        <a id = "matchedLink"><h4>Click for Picture</h4></a>
                    </div>
                </div>
            </div>
        </div>

    </div>
    
</body>
</html>

<script type = "text/javascript">



$("#submit").on("click", function(event){

    event.preventDefault()

    if($("#yourName").val() === "" || $("#photoLink").val() === "") {
        alert("Please fill out your name and link for photo.")
    } else 

    if($("#Q1") === "" || $("#Q2") === "" || $("#Q3") === "" || $("#Q4") === "" || $("#Q5") === "" ||
        $("#Q6") === "" || $("#Q7") === "" || $("#Q8") === "" || $("#Q9") === "" || $("#Q10") === "") {
        alert("Please answer all the questions.")

    } else {

    var newFriend = {
        name: $("#yourName").val().trim(),
        link: $("#photoLink").val().trim(),
        scores: [
        $("#Q1 input:radio:checked").val(),
        $("#Q2 input:radio:checked").val(),
        $("#Q3 input:radio:checked").val(),
        $("#Q4 input:radio:checked").val(),
        $("#Q5 input:radio:checked").val(),
        $("#Q6 input:radio:checked").val(),
        $("#Q7 input:radio:checked").val(),
        $("#Q8 input:radio:checked").val(),
        $("#Q9 input:radio:checked").val(),
        $("#Q10 input:radio:checked").val()
       ]
    };

    $.post("/api/friends", newFriend, function(data){
        
    });

    $.get('/api/match/:id', bestMatch, function(data) {
        ("#matchedFriend").text("Name: " + bestMatch.name)
        $("#matchedLink").attr("href", bestMatch.link)
        $("#matchedLink").on("click", function(event){
        event.preventDefault();
        window.open(bestMatch.link)
        })
    })


        $("#bestFriendModal").modal("show")
    };
})

//     function getFriend() {
//     $.ajax({ url: "/api/friends", method: "GET" })
//     .then(function(friends) {
//         console.log(friends)
//     })
// }

// function getMatch() {
//     $.ajax({ url: "/api/match/" + "1", method: "GET" })
//     .then(function(data) {
//         console.log(data)
//     })
// }
//         var friendScore = []
//         var total = []
//         for(var i = 0; i < friends.length; i++){
//             console.log(friends)
//             scores = friends[i].scores
//             userScores = newFriend.scores
//             for( var j = 0; j < scores.length; j++) {
//                 total.push(parseInt(Math.abs(userScores[j] - scores[j])))
//             }
//             let sum = total.reduce((acc, val) => {
//                 return acc + val
//             });
//             friendScore.push({name: friends[i].name, link: friends[i].link, score: sum})
//             var total = []
//         }
//         friendScore.pop()
//         friendFinder(friendScore)
//         })

//         function friendFinder(arr){
//             var bestMatch = arr[0]
//             for(var i = 0; i < arr.length; i++){
//                 if(arr[i].score < bestMatch.score) {
//                     bestMatch = arr[i]
//                 }
//             }
//             $("#matchedFriend").text("Name: " + bestMatch.name)
//             $("#matchedLink").attr("href", bestMatch.link)
//             $("#matchedLink").on("click", function(event){
//                 event.preventDefault();
//                 window.open(bestMatch.link)
//             })
//             console.log(bestMatch)
//         } 
//     }

    // function tallyScores(arr, user) {
    //         var friendScore = []
    //         var total = []
    //         for(var i = 0; i < arr.length; i++){
    //             scores = arr[i].scores
    //             userScores = user.scores
    //             for( var j = 0; j < scores.length; j++) {
    //                 total.push(parseInt(Math.abs(userScores[j] - scores[j])))
    //             }
    //             let sum = total.reduce((acc, val) => {
    //                 return acc + val
    //             });
    //             friendScore.push({name: arr[i].name, link: arr[i].link, score: sum})
    //             var total = []
    //         }
    //         friendScore.pop()
    //         friendFinder(friendScore)
            
    //     }
        
    //     function friendFinder(arr){
    //         var bestMatch = arr[0]
    //         for(var i = 0; i < arr.length; i++){
    //             if(arr[i].score < bestMatch.score) {
    //                 bestMatch = arr[i]
    //             }
    //         }
    //     }     

</script>
